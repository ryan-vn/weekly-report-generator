# 更新日志

## [优化] 2025-10-23

### 🔍 移除缓存机制，优化 AI 调用日志

**改进内容：**
- ✅ 移除了提交信息的内存缓存机制
- ✅ 每次都实时调用 DeepSeek AI 进行解析
- ✅ 添加详细的 AI 调用日志，包括：
  - 🤖 调用时显示正在解析的提交信息
  - ⏱️ 显示 API 调用耗时
  - ✅ 显示解析结果
  - ❌ API 调用失败时显示错误信息
  - ⚠️ 使用降级方案时的提示

**日志示例：**
```
📊 开始使用 DeepSeek AI 解析 3 条提交记录...

[1/3] 处理提交: 2a3b4c5d (2025-10-23)
🤖 调用 DeepSeek AI 解析: [project-name] fix: 修复登录页面验证错误...
   ✅ AI 解析完成 (耗时: 1234ms) -> 修复登录页面验证逻辑错误

[2/3] 处理提交: 6e7f8g9h (2025-10-23)
🤖 调用 DeepSeek AI 解析: [project-name] feat: 添加用户权限管理功能...
   ✅ AI 解析完成 (耗时: 1567ms) -> 实现用户权限管理模块

✅ DeepSeek AI 解析完成！共处理 3 条提交，生成 3 条任务
```

**优势：**
- 🔍 **透明度**：清楚知道何时调用了 AI
- ⏱️ **性能监控**：可以看到每次 API 调用的耗时
- 🐛 **调试友好**：便于排查问题
- 📊 **实时性**：不使用缓存，确保每次都获取最新结果

---

### ✨ DeepSeek API Key 配置方式优化

**改进内容：**
- ✅ 新增 `dotenv` 包支持，实现自动加载 `.env` 文件
- ✅ 创建 `.env.example` 模板文件，方便用户配置
- ✅ 更新 `.gitignore`，确保 `.env` 不会被提交到版本控制
- ✅ 优化 `start.sh` 启动脚本，提供更友好的提示
- ✅ 更新 `README.md` 文档，说明最佳配置方式

**使用方式：**

推荐使用 `.env` 文件（标准做法）：
```bash
cp .env.example .env
# 编辑 .env 文件，填入你的 API Key
```

备选方式（兼容旧方式）：
```bash
export DEEPSEEK_API_KEY="sk-your-api-key-here"
```

**优势：**
- 🔒 **安全性**：`.env` 文件不会被提交到版本控制
- 👥 **团队协作**：每个开发者可以有独立的配置
- 🚀 **便利性**：无需每次重启终端都重新设置环境变量
- 📦 **标准化**：符合 Node.js 社区最佳实践

**技术细节：**
- `index.js` 和 `server.js` 在启动时自动调用 `require('dotenv').config()`
- 支持两种配置方式：`.env` 文件优先，环境变量作为备选
- 启动脚本会检测 `.env` 文件是否存在并给出友好提示
