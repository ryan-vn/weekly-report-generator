# 使用说明

## 📋 控制台输出示例

运行周报生成器时，控制台会显示详细的 Git 提交信息：

```
============================================================
🚀 开始生成周报
============================================================
👤 周报负责人: 张三
📦 项目数量: 2
📅 日期范围: 本周一 ~ 本周五

📅 查询时间范围: 2025-10-21 ~ 2025-10-25 (10月21日 ~ 10月25日)
📁 扫描项目数量: 2

🔍 正在扫描项目: rs-booking
  ✅ 找到 3 条提交记录

  📝 提交 1/3:
     提交哈希: a1b2c3d4
     提交作者: 张三
     提交日期: 2025-10-21
     提交信息: feat: 实现用户预订功能
     修改文件: M src/booking.js, A src/user.js, M package.json

  📝 提交 2/3:
     提交哈希: e5f6g7h8
     提交作者: 张三
     提交日期: 2025-10-22
     提交信息: fix: 修复日期选择器bug
     修改文件: M src/datepicker.js

  📝 提交 3/3:
     提交哈希: i9j0k1l2
     提交作者: 张三
     提交日期: 2025-10-23
     提交信息: docs: 更新API文档
     修改文件: M README.md, M docs/api.md

✅ 总计获取 3 条提交记录（来自 2 个项目）

🔍 解析第 1/3 条提交... (rs-booking)
🔍 解析第 2/3 条提交... (rs-booking)
🔍 解析第 3/3 条提交... (rs-booking)
✅ 已填充 3 条重点任务
✅ 已填充 0 条日常问题
🎉 周报生成成功！
```

## 📅 日期范围说明

### 默认行为

- **周一至周五**：默认统计本周的工作日提交
- **时间范围**：从周一 00:00:00 到周五 23:59:59
- **当前周判断**：基于今天的日期自动计算本周周一

### 自定义日期

在 Web 界面中，你可以：
1. 留空日期字段 → 使用默认的周一至周五
2. 填写开始和结束日期 → 使用自定义范围

### 示例

假设今天是 2025年10月23日（周三）：
- 开始日期：2025-10-21（本周一）
- 结束日期：2025-10-25（本周五）

即使今天还没到周五，系统也会统计到周五的提交（如果有的话）。

## 🔍 提交记录详解

每条提交记录包含：

| 字段 | 说明 | 示例 |
|------|------|------|
| 提交哈希 | Git commit 的唯一标识（前8位） | `a1b2c3d4` |
| 提交作者 | 提交代码的开发者 | `张三` |
| 提交日期 | 提交的日期 | `2025-10-21` |
| 提交信息 | commit message | `feat: 实现用户预订功能` |
| 修改文件 | 修改/新增/删除的文件列表 | `M src/booking.js, A src/user.js` |

### 文件状态标识

- `M` (Modified) - 修改
- `A` (Added) - 新增
- `D` (Deleted) - 删除
- `R` (Renamed) - 重命名
- `C` (Copied) - 复制

## 🤖 AI 智能解析

系统会自动将 Git 提交信息解析为：

### 任务类型判断

- **任务**：开发新功能、优化代码、重构等
- **问题**：修复 bug、解决异常、处理错误等

### 自动分类

常见分类包括：
- 开发新功能
- 修复生产bug
- 优化性能
- 文档更新
- 代码重构
- 测试用例
- 环境配置

### 提取信息

1. **描述简化**：将冗长的 commit message 精简为 10-30 字
2. **关联ID提取**：自动识别需求号、Bug号（如 #123, REQ-456）
3. **项目标识**：标记提交来自哪个项目

## 📊 生成的周报

### 重点任务表

| 序号 | 重点需求或任务 | 事项说明 | 启动日期 | 预计完成日期 | 负责人 | 协同人或部门 | 完成进度 | 备注 |
|------|--------------|---------|---------|-------------|--------|-------------|---------|------|
| 1 | 开发新功能 | [rs-booking] 实现用户预订功能 | 2025-10-21 | 2025-10-21 | 张三 | 无 | 100% | 关联ID: 无 |

### 日常问题表

| 序号 | 问题分类 | 具体描述 | 提出日期 | 解决方案 | 解决日期 |
|------|---------|---------|---------|---------|---------|
| 1 | 修复生产bug | [rs-booking] 修复日期选择器bug | 2025-10-22 | 已修复/处理 | 2025-10-22 |

## 💡 最佳实践

### 1. Git Commit 规范

建议使用规范的 commit message 格式：

```
<type>(<scope>): <subject>

feat: 新功能
fix: 修复bug
docs: 文档更新
style: 代码格式
refactor: 重构
test: 测试
chore: 构建/工具

示例：
feat(booking): 实现预订功能 #REQ-123
fix(payment): 修复支付失败问题 #BUG-456
```

### 2. 多项目管理

对于维护多个项目的情况：
- 在 Web 界面一次性添加所有项目
- 生成的周报会自动标注每个任务/问题来自哪个项目
- 便于跨项目工作总结

### 3. 日期范围选择

- **周报**：使用默认的周一至周五
- **月报**：自定义日期范围为当月1号到月底
- **专项统计**：设置特定的起止日期

### 4. 验证生成结果

生成周报后建议：
1. 检查控制台输出，确认提取的提交是否完整
2. 打开生成的 Excel 文件，查看 AI 解析结果是否准确
3. 根据需要手动调整描述或分类

## ⚠️ 注意事项

1. **权限问题**：确保对所有项目目录有读取权限
2. **Git 仓库**：目录必须是有效的 Git 仓库
3. **提交作者**：Git 配置的用户名会显示在周报中
4. **API 限制**：DeepSeek API 有调用频率限制，大量提交可能需要时间
5. **网络连接**：需要互联网连接来调用 DeepSeek AI

## 🆘 常见问题排查

### 没有找到提交记录

检查：
- 日期范围是否正确（注意周一至周五）
- 项目路径是否正确
- Git 仓库是否有提交
- 提交作者是否匹配当前用户

### AI 解析不准确

可以：
- 在 Excel 中手动修改
- 优化 Git commit message 的书写规范
- 调整 server.js 中的 AI prompt

### 控制台输出乱码

- 确保终端支持 UTF-8 编码
- macOS/Linux 一般无此问题
- Windows 可能需要设置：`chcp 65001`

