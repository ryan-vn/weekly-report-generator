<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤šé¡¹ç›®æ·»åŠ æµ‹è¯•</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .project-item { background: #f5f5f5; padding: 10px; margin: 5px 0; border-radius: 3px; }
        button { padding: 8px 15px; margin: 5px; cursor: pointer; }
        input { padding: 8px; width: 300px; }
    </style>
</head>
<body>
    <h1>å¤šé¡¹ç›®æ·»åŠ æµ‹è¯•</h1>
    
    <div class="test-section">
        <h3>æµ‹è¯•æ·»åŠ é¡¹ç›®</h3>
        <input type="text" id="projectInput" placeholder="è¾“å…¥é¡¹ç›®è·¯å¾„" value="/Users/vincent/project/test-project">
        <button onclick="addProject()">æ·»åŠ é¡¹ç›®</button>
        <button onclick="clearProjects()">æ¸…ç©ºé¡¹ç›®</button>
        <button onclick="showProjects()">æ˜¾ç¤ºé¡¹ç›®åˆ—è¡¨</button>
    </div>

    <div class="test-section">
        <h3>é¡¹ç›®åˆ—è¡¨ (<span id="projectCount">0</span> ä¸ªé¡¹ç›®)</h3>
        <div id="projectList">
            <div class="empty-state">æš‚æ— é¡¹ç›®</div>
        </div>
    </div>

    <div class="test-section">
        <h3>æ§åˆ¶å°æ—¥å¿—</h3>
        <div id="consoleLog" style="background: #f0f0f0; padding: 10px; height: 200px; overflow-y: auto; font-family: monospace; font-size: 12px;"></div>
    </div>

    <script>
        let projectPaths = [];

        // é‡å†™ console.log æ¥æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š
        const originalLog = console.log;
        console.log = function(...args) {
            originalLog.apply(console, args);
            const logDiv = document.getElementById('consoleLog');
            logDiv.innerHTML += args.join(' ') + '<br>';
            logDiv.scrollTop = logDiv.scrollHeight;
        };

        function addProject() {
            const input = document.getElementById('projectInput');
            const path = input.value.trim();

            console.log('å°è¯•æ·»åŠ é¡¹ç›®:', path);
            console.log('å½“å‰é¡¹ç›®åˆ—è¡¨:', projectPaths);

            if (!path) {
                alert('è¯·è¾“å…¥é¡¹ç›®è·¯å¾„');
                return;
            }

            if (projectPaths.includes(path)) {
                alert('è¯¥é¡¹ç›®å·²æ·»åŠ ');
                return;
            }

            projectPaths.push(path);
            input.value = '';
            console.log('æ·»åŠ åçš„é¡¹ç›®åˆ—è¡¨:', projectPaths);
            renderProjects();
        }

        function clearProjects() {
            projectPaths = [];
            console.log('æ¸…ç©ºé¡¹ç›®åˆ—è¡¨');
            renderProjects();
        }

        function showProjects() {
            console.log('å½“å‰é¡¹ç›®åˆ—è¡¨:', projectPaths);
        }

        function removeProject(index) {
            projectPaths.splice(index, 1);
            console.log('åˆ é™¤é¡¹ç›®ï¼Œæ–°åˆ—è¡¨:', projectPaths);
            renderProjects();
        }

        function renderProjects() {
            const container = document.getElementById('projectList');
            const projectCount = document.getElementById('projectCount');

            projectCount.textContent = projectPaths.length;

            if (projectPaths.length === 0) {
                container.innerHTML = '<div class="empty-state">æš‚æ— é¡¹ç›®</div>';
                return;
            }

            container.innerHTML = '';
            projectPaths.forEach((path, index) => {
                const item = document.createElement('div');
                item.className = 'project-item';
                const projectName = path.split('/').pop() || path;
                item.innerHTML = `
                    <span title="${path}">ğŸ“ ${projectName}</span>
                    <button onclick="removeProject(${index})">åˆ é™¤</button>
                `;
                container.appendChild(item);
            });
        }

        // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºåˆå§‹çŠ¶æ€
        console.log('é¡µé¢åŠ è½½å®Œæˆ');
        renderProjects();
    </script>
</body>
</html>
